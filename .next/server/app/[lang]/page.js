(()=>{var e={};e.id=495,e.ids=[495],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},76402:e=>{"use strict";e.exports=require("node:stream/promises")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},66170:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>l}),r(83064),r(59282),r(53956),r(6047),r(11506),r(26083),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l=["",{children:["[lang]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,83064)),"/workspace/app/[lang]/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,59282)),"/workspace/app/[lang]/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,53956)),"/workspace/app/[lang]/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,6047)),"/workspace/app/[lang]/not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/workspace/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"/workspace/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/workspace/app/[lang]/page.tsx"],u="/[lang]/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[lang]/page",pathname:"/[lang]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},5155:(e,t,r)=>{Promise.resolve().then(r.bind(r,11242))},52536:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(10326),a=r(41135),n=r(31009);r(17577);let i=function({className:e,...t}){return s.jsx("div",{className:function(...e){return(0,n.m6)((0,a.W)(e))}("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",e),...t})};function o(){return(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(i,{className:"w-12 h-12 rounded-full flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[s.jsx(i,{className:"h-4 w-1/3"}),s.jsx(i,{className:"h-3 w-1/4"})]})]}),(0,s.jsxs)("div",{className:"px-4 pb-4 space-y-2",children:[s.jsx(i,{className:"h-4 w-full"}),s.jsx(i,{className:"h-4 w-5/6"})]}),s.jsx(i,{className:"w-full h-48"}),(0,s.jsxs)("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[s.jsx(i,{className:"h-4 w-1/4"}),s.jsx(i,{className:"h-4 w-1/3"})]}),(0,s.jsxs)("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-around gap-2",children:[s.jsx(i,{className:"h-8 w-1/3"}),s.jsx(i,{className:"h-8 w-1/3"}),s.jsx(i,{className:"h-8 w-1/3"})]})]})}},48918:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var s=r(10326),a=r(88129),n=r(30058),i=r(17577),o=r(39447),c=r(67427),l=r(39730),d=r(76993);function u({postId:e,lang:t}){return s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-4",children:s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,s.jsxs)("p",{children:["Comments section for post ",e," is under construction."]})})})}var p=r(10525),x=r(71758),h=r(73280);let g="https://winter-leaf-f532.safaribosafar.workers.dev",m="https://winter-leaf-f532.safaribosafar.workers.dev";async function f(e,t,r=3,s=1e3){for(let a=0;a<r;a++){try{let r=await fetch(e,t);if(r.ok||r.status>=400&&r.status<500)return r}catch(e){if(a===r-1)throw e}await new Promise(e=>setTimeout(e,s*Math.pow(2,a)))}throw Error(`API request to ${e} failed after ${r} retries.`)}async function y(e,t){let r;if(!g)throw Error("NEXT_PUBLIC_API_BASE_URL is not defined");let s=`${g}${e}`;try{if((r=await f(s,t)).status>=500)throw Error(`Primary API server error: ${r.status}`)}catch(a){if(console.warn(`Primary API request to ${s} failed: ${a}. Attempting fallback.`),m){let s=`${m}${e}`;try{r=await f(s,t)}catch(e){throw console.error(`Backup API request to ${s} also failed:`,e),e}}else throw a}if(!r.ok){let e=await r.text().catch(()=>"Could not read error response body.");throw Error(`API Error: ${r.status} ${r.statusText}. Body: ${e}`)}let a=await r.text();return a?JSON.parse(a):{}}async function b(e,t={}){return y(e,{...t,headers:{"Content-Type":"application/json",...t.headers},next:{revalidate:3600}})}let v=async e=>b(`/api/posts/${e}/like`,{method:"POST"});var j=r(40381);function w({post:e,lang:t}){let[r,a]=(0,i.useState)(!1),[g,m]=(0,i.useState)(e.likes),[f,y]=(0,i.useState)(!1),b=async()=>{a(!r),m(e=>r?e-1:e+1);try{await v(e.id)}catch(e){console.error("Failed to like post. Reverting.",e),a(r),m(g),j.Am.error("Couldn't like post. Please try again.")}},w={ar:x.ar,en:h._,ku:x.ar};return(0,s.jsxs)("article",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:e.author.avatar,alt:e.author.name,className:"w-12 h-12 rounded-full object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.author.name}),e.author.verified&&s.jsx("svg",{className:"w-5 h-5 text-blue-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.41 15.41L5.17 12l1.41-1.41L10.59 14.59 17.41 7.76l1.41 1.41L10.59 17.41z"})})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,p.Q)(new Date(e.timestamp),{addSuffix:!0,locale:w[t]})})]})]}),s.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:s.jsx(o.Z,{size:20})})]}),s.jsx("div",{className:"px-4 pb-4",children:s.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:e.content})}),e.image&&s.jsx("img",{src:e.image,alt:"Post content",className:"w-full max-h-96 object-cover"}),s.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:[g.toLocaleString()," likes"]}),(0,s.jsxs)("span",{children:[e.comments," comments \xb7 ",e.shares," shares"]})]})}),(0,s.jsxs)("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-around",children:[(0,s.jsxs)(n.E.button,{whileTap:{scale:.95},onClick:b,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition w-1/3 justify-center ${r?"text-red-500 bg-red-50 dark:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-label":r?"Unlike post":"Like post",children:[s.jsx(c.Z,{size:20,fill:r?"currentColor":"none"}),s.jsx("span",{className:"font-medium",children:"Like"})]}),(0,s.jsxs)("button",{onClick:()=>y(!f),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 w-1/3 justify-center","aria-expanded":f,children:[s.jsx(l.Z,{size:20}),s.jsx("span",{className:"font-medium",children:"Comment"})]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 w-1/3 justify-center",children:[s.jsx(d.Z,{size:20}),s.jsx("span",{className:"font-medium",children:"Share"})]})]}),f&&s.jsx(u,{postId:e.id,lang:t})]})}var k=r(52536);function N({lang:e,posts:t}){return t?0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-12 text-center dark:border-gray-600",children:[s.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"The feed is empty"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Be the first to share something!"})]}):s.jsx("div",{className:"space-y-4",children:s.jsx(a.M,{children:t.map(t=>s.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},layout:!0,children:s.jsx(w,{post:t,lang:e})},t.id))})}):s.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>s.jsx(k.Z,{},t))})}},11242:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var s=r(10326),a=r(17577);let n={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},i={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},o="mousemove",c="mouseup";function l(e,t){if(0===t)return e;let r=Math.PI/180*t;return[e[0]*Math.cos(r)+e[1]*Math.sin(r),e[1]*Math.cos(r)-e[0]*Math.sin(r)]}var d=r(35047),u=r(48918),p=r(30058),x=r(62881);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,x.Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),g=(0,x.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var m=r(40381),f=r(55829);let y=process.env.API_KEY,b=y?new f.fA({apiKey:y}):null,v=async()=>{if(!b)return console.warn("API_KEY for Gemini is not set. AI features are disabled."),"AI is currently unavailable. Please try again later.";try{return(await b.models.generateContent({model:"gemini-2.5-flash",contents:"Write a short, witty, and slightly humorous social media post about daily life, politics, or tea in Iraq. Keep it under 280 characters. The tone should be optimistic and engaging for a young Iraqi audience. Do not use hashtags."})).text||"Couldn't generate a post right now. Try again in a moment!"}catch(e){return console.error("Error generating social post:",e),"Couldn't generate a post right now. Try again in a moment!"}};var j=r(52536);let w={name:"You",avatar:"https://i.pravatar.cc/48?u=current_user",verified:!1};function k({onCreatePost:e,dictionary:t}){let[r,n]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1),c=async()=>{o(!0);try{let e=await v();n(e)}catch(e){m.Am.error("Failed to generate post.")}finally{o(!1)}};return s.jsx(p.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-md mb-6",children:(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),r.trim()&&(e(r),n(""),m.Am.success("Your post has been published!"))},children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("img",{src:w.avatar,alt:"Your avatar",className:"w-12 h-12 rounded-full"}),s.jsx("textarea",{value:r,onChange:e=>n(e.target.value),placeholder:t.placeholder,className:"w-full h-24 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500 resize-none","aria-label":"Create a new post"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("button",{type:"button",onClick:c,disabled:i,className:"flex items-center gap-2 px-4 py-2 text-green-700 font-semibold rounded-lg disabled:opacity-50 hover:bg-green-50 dark:text-green-400 dark:hover:bg-gray-700 transition",children:[i?s.jsx("div",{className:"w-4 h-4 border-2 border-dashed rounded-full animate-spin border-green-500"}):s.jsx(h,{size:16}),s.jsx("span",{children:i?t.generating:t.generateWithAI})]}),(0,s.jsxs)("button",{type:"submit",disabled:!r.trim(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-green-700 transition",children:[s.jsx(g,{size:16}),s.jsx("span",{children:t.post})]})]})]})})}function N({lang:e,dictionary:t}){let r=(0,d.useRouter)(),[p,x]=(0,a.useState)([]),[h,g]=(0,a.useState)(!0),m=function(e){var t,r,s;let d;let{trackMouse:u}=e,p=a.useRef(Object.assign({},i)),x=a.useRef(Object.assign({},n)),h=a.useRef(Object.assign({},x.current));for(d in h.current=Object.assign({},x.current),x.current=Object.assign(Object.assign({},n),e),n)void 0===x.current[d]&&(x.current[d]=n[d]);let[g,m]=a.useMemo(()=>(function(e,t){let r=t=>{let r="touches"in t;r&&t.touches.length>1||e((e,a)=>{a.trackMouse&&!r&&(document.addEventListener(o,s),document.addEventListener(c,u));let{clientX:n,clientY:d}=r?t.touches[0]:t,p=l([n,d],a.rotationAngle);return a.onTouchStartOrOnMouseDown&&a.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),i),{initial:p.slice(),xy:p,start:t.timeStamp||0})})},s=t=>{e((e,r)=>{let s="touches"in t;if(s&&t.touches.length>1)return e;if(t.timeStamp-e.start>r.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:a,clientY:i}=s?t.touches[0]:t,[o,c]=l([a,i],r.rotationAngle),d=o-e.xy[0],u=c-e.xy[1],p=Math.abs(d),x=Math.abs(u),h=(t.timeStamp||0)-e.start,g=p>x?d>0?"Right":"Left":u>0?"Down":"Up",m="number"==typeof r.delta?r.delta:r.delta[g.toLowerCase()]||n.delta;if(p<m&&x<m&&!e.swiping)return e;let f={absX:p,absY:x,deltaX:d,deltaY:u,dir:g,event:t,first:e.first,initial:e.initial,velocity:Math.sqrt(p*p+x*x)/(h||1),vxvy:[d/(h||1),u/(h||1)]};f.first&&r.onSwipeStart&&r.onSwipeStart(f),r.onSwiping&&r.onSwiping(f);let y=!1;return(r.onSwiping||r.onSwiped||r[`onSwiped${g}`])&&(y=!0),y&&r.preventScrollOnSwipe&&r.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:f,swiping:!0})})},a=t=>{e((e,r)=>{let s;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<r.swipeDuration){s=Object.assign(Object.assign({},e.eventData),{event:t}),r.onSwiped&&r.onSwiped(s);let a=r[`onSwiped${s.dir}`];a&&a(s)}}else r.onTap&&r.onTap({event:t});return r.onTouchEndOrOnMouseUp&&r.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),i),{eventData:s})})},d=()=>{document.removeEventListener(o,s),document.removeEventListener(c,u)},u=e=>{d(),a(e)},p=(e,t)=>{let i=()=>{};if(e&&e.addEventListener){let o=Object.assign(Object.assign({},n.touchEventOptions),t.touchEventOptions),c=[["touchstart",r,o],["touchmove",s,Object.assign(Object.assign({},o),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",a,o]];c.forEach(([t,r,s])=>e.addEventListener(t,r,s)),i=()=>c.forEach(([t,r])=>e.removeEventListener(t,r))}return i},x={ref:t=>{null!==t&&e((e,r)=>{if(e.el===t)return e;let s={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),s.cleanUpTouch=void 0),r.trackTouch&&t&&(s.cleanUpTouch=p(t,r)),Object.assign(Object.assign(Object.assign({},e),{el:t}),s)})}};return t.trackMouse&&(x.onMouseDown=r),[x,p]})(e=>p.current=e(p.current,x.current),{trackMouse:u}),[u]);return p.current=(t=p.current,r=x.current,s=h.current,r.trackTouch&&t.el?t.cleanUpTouch?r.preventScrollOnSwipe!==s.preventScrollOnSwipe||r.touchEventOptions.passive!==s.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:m(t.el,r)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:m(t.el,r)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0}))),g}({onSwipedLeft:()=>r.push(`/${e}/discover`),onSwipedRight:()=>r.push(`/${e}/profile`),preventScrollOnSwipe:!0,trackMouse:!0});return s.jsx("div",{...m,className:"min-h-screen",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[s.jsx(k,{onCreatePost:e=>{let t={id:`post-${Date.now()}`,author:w,content:e,likes:0,comments:0,shares:0,timestamp:new Date};x(e=>[t,...e])},dictionary:t.compose}),h?(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(j.Z,{}),s.jsx(j.Z,{})]}):s.jsx(u.default,{lang:e,posts:p})]})})}Date.now(),Date.now()},83064:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,generateStaticParams:()=>u});var s=r(19510),a=r(68570);let n=(0,a.createProxy)(String.raw`/workspace/components/views/HomeView.tsx`),{__esModule:i,$$typeof:o}=n;n.default;let c=(0,a.createProxy)(String.raw`/workspace/components/views/HomeView.tsx#default`);var l=r(88483),d=r(66825);async function u(){return d.a.locales.map(e=>({lang:e}))}async function p({params:{lang:e}}){let t=await (0,l.R)(e);return s.jsx(c,{lang:e,dictionary:t})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[740,631,829,882,857],()=>r(66170));module.exports=s})();