(()=>{var e={};e.id=495,e.ids=[495],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8021:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),a(3064),a(9282),a(3956),a(6033),a(1506),a(6083),a(5866);var r=a(3191),s=a(8716),n=a(7922),i=a.n(n),o=a(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["[lang]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3064)),"E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\[lang]\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,9282)),"E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\[lang]\\layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,3956)),"E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\[lang]\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,6033)),"E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\[lang]\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,6083)),"E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\HamletUnified\\Copy-of-Hamlet-social\\app\\[lang]\\page.tsx"],u="/[lang]/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/[lang]/page",pathname:"/[lang]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7130:(e,t,a)=>{Promise.resolve().then(a.bind(a,1242))},9445:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var r=a(326),s=a(8129),n=a(58),i=a(7577),o=a(9447),l=a(7427),c=a(9730),d=a(6993);function u({postId:e,lang:t}){return r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-4",children:r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,r.jsxs)("p",{children:["Comments section for post ",e," is under construction."]})})})}var p=a(2365),h=a(1758),m=a(3280),g=a(1727);let x=process.env.NEXT_PUBLIC_API_BASE_URL,f="https://winter-leaf-f532.safaribosafar.workers.dev";async function y(e,t){let a;if(!x)throw Error("NEXT_PUBLIC_API_BASE_URL is not defined");let r=`${x}${e}`;try{if((a=await fetch(r,t)).status>=500)throw Error(`Primary API server error: ${a.status}`)}catch(s){if(console.warn(`Primary API request to ${r} failed: ${s}. Attempting fallback.`),f){let r=`${f}${e}`;try{a=await fetch(r,t)}catch(e){throw console.error(`Backup API request to ${r} also failed:`,e),e}}else throw s}if(!a.ok){let e=await a.text().catch(()=>"Could not read error response body.");throw Error(`API Error: ${a.status} ${a.statusText}. Body: ${e}`)}let s=await a.text();return s?JSON.parse(s):{}}async function v(e,t={}){return y(e,{...t,headers:{"Content-Type":"application/json",...t.headers},next:{revalidate:3600}})}let b=async e=>v(`/api/posts/${e}/like`,{method:"POST"});function j({post:e,lang:t}){let[a,s]=(0,i.useState)(!1),[x,f]=(0,i.useState)(e.likes),[y,v]=(0,i.useState)(!1),j=async()=>{s(!a),f(e=>a?e-1:e+1);try{await b(e.id)}catch(e){console.error("Failed to like post. Reverting.",e),s(a),f(x),Object(function(){var e=Error("Cannot find module 'react-hot-toast'");throw e.code="MODULE_NOT_FOUND",e}()).error("Couldn't like post. Please try again.")}},w={ar:h.ar,en:m._,ku:g.ku};return(0,r.jsxs)("article",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:e.author.avatar,alt:e.author.name,className:"w-12 h-12 rounded-full object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.author.name}),e.author.verified&&r.jsx("svg",{className:"w-5 h-5 text-blue-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.41 15.41L5.17 12l1.41-1.41L10.59 14.59 17.41 7.76l1.41 1.41L10.59 17.41z"})})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,p.Q)(new Date(e.timestamp),{addSuffix:!0,locale:w[t]})})]})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:r.jsx(o.Z,{size:20})})]}),r.jsx("div",{className:"px-4 pb-4",children:r.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:e.content})}),e.image&&r.jsx("img",{src:e.image,alt:"Post content",className:"w-full max-h-96 object-cover"}),r.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:[x.toLocaleString()," likes"]}),(0,r.jsxs)("span",{children:[e.comments," comments \xb7 ",e.shares," shares"]})]})}),(0,r.jsxs)("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-around",children:[(0,r.jsxs)(n.E.button,{whileTap:{scale:.95},onClick:j,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition w-1/3 justify-center ${a?"text-red-500 bg-red-50 dark:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-label":a?"Unlike post":"Like post",children:[r.jsx(l.Z,{size:20,fill:a?"currentColor":"none"}),r.jsx("span",{className:"font-medium",children:"Like"})]}),(0,r.jsxs)("button",{onClick:()=>v(!y),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 w-1/3 justify-center","aria-expanded":y,children:[r.jsx(c.Z,{size:20}),r.jsx("span",{className:"font-medium",children:"Comment"})]}),(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 w-1/3 justify-center",children:[r.jsx(d.Z,{size:20}),r.jsx("span",{className:"font-medium",children:"Share"})]})]}),y&&r.jsx(u,{postId:e.id,lang:t})]})}!function(){var e=Error("Cannot find module 'react-hot-toast'");throw e.code="MODULE_NOT_FOUND",e}();var w=a(1135);!function(){var e=Error("Cannot find module 'tailwind-merge'");throw e.code="MODULE_NOT_FOUND",e}();let O=function({className:e,...t}){return r.jsx("div",{className:function(...e){return Object(function(){var e=Error("Cannot find module 'tailwind-merge'");throw e.code="MODULE_NOT_FOUND",e}())((0,w.W)(e))}("animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",e),...t})};function N(){return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[r.jsx(O,{className:"w-12 h-12 rounded-full flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[r.jsx(O,{className:"h-4 w-1/3"}),r.jsx(O,{className:"h-3 w-1/4"})]})]}),(0,r.jsxs)("div",{className:"px-4 pb-4 space-y-2",children:[r.jsx(O,{className:"h-4 w-full"}),r.jsx(O,{className:"h-4 w-5/6"})]}),r.jsx(O,{className:"w-full h-48"}),(0,r.jsxs)("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[r.jsx(O,{className:"h-4 w-1/4"}),r.jsx(O,{className:"h-4 w-1/3"})]}),(0,r.jsxs)("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-700 flex items-center justify-around gap-2",children:[r.jsx(O,{className:"h-8 w-1/3"}),r.jsx(O,{className:"h-8 w-1/3"}),r.jsx(O,{className:"h-8 w-1/3"})]})]})}function k({lang:e,posts:t}){return t?0===t.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-12 text-center dark:border-gray-600",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"The feed is empty"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Be the first to share something!"})]}):r.jsx("div",{className:"space-y-4",children:r.jsx(s.M,{children:t.map(t=>r.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},layout:!0,children:r.jsx(j,{post:t,lang:e})},t.id))})}):r.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>r.jsx(N,{},t))})}},1242:(e,t,a)=>{"use strict";a.d(t,{default:()=>w});var r=a(326),s=a(7577);let n={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},i={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},o="mousemove",l="mouseup";function c(e,t){if(0===t)return e;let a=Math.PI/180*t;return[e[0]*Math.cos(a)+e[1]*Math.sin(a),e[1]*Math.cos(a)-e[0]*Math.sin(a)]}var d=a(5047),u=a(9445),p=a(58),h=a(2881);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,h.Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),g=(0,h.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);!function(){var e=Error("Cannot find module '@google/genai'");throw e.code="MODULE_NOT_FOUND",e}();let x=process.env.NEXT_PUBLIC_API_KEY,f=x?Object(function(){var e=Error("Cannot find module '@google/genai'");throw e.code="MODULE_NOT_FOUND",e}())({apiKey:x}):null,y=async()=>{if(!f)return console.warn("NEXT_PUBLIC_API_KEY for Gemini is not set. AI features are disabled."),"AI is currently unavailable. Please try again later.";try{return(await f.models.generateContent({model:"gemini-2.5-flash",contents:"Write a short, witty, and slightly humorous social media post about daily life, politics, or tea in Iraq. Keep it under 280 characters. The tone should be optimistic and engaging for a young Iraqi audience. Do not use hashtags."})).text}catch(e){return console.error("Error generating social post:",e),"Couldn't generate a post right now. Try again in a moment!"}};!function(){var e=Error("Cannot find module 'react-hot-toast'");throw e.code="MODULE_NOT_FOUND",e}();let v={name:"You",avatar:"https://i.pravatar.cc/48?u=current_user",verified:!1},b=[{id:"post-1",author:{name:"Iraqi News",avatar:"https://i.pravatar.cc/48?u=news",verified:!0},content:"Election day is approaching! Make sure you are registered to vote and have a plan to get to the polls. Your voice matters.",likes:1200,comments:153,shares:45,timestamp:new Date(Date.now()-18e5),image:"https://picsum.photos/seed/election-day/800/400"},{id:"post-2",author:{name:"Community Organizer",avatar:"https://i.pravatar.cc/48?u=organizer",verified:!1},content:"We are organizing a local town hall next week to discuss key issues with candidates. All are welcome to attend and participate in the discussion.",likes:450,comments:62,shares:12,timestamp:new Date(Date.now()-108e5)}];function j({onCreatePost:e,dictionary:t}){let[a,n]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),l=async()=>{o(!0);try{let e=await y();n(e)}catch(e){Object(function(){var e=Error("Cannot find module 'react-hot-toast'");throw e.code="MODULE_NOT_FOUND",e}()).error("Failed to generate post.")}finally{o(!1)}};return r.jsx(p.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-md mb-6",children:(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault(),a.trim()&&(e(a),n(""),Object(function(){var e=Error("Cannot find module 'react-hot-toast'");throw e.code="MODULE_NOT_FOUND",e}()).success("Your post has been published!"))},children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("img",{src:v.avatar,alt:"Your avatar",className:"w-12 h-12 rounded-full"}),r.jsx("textarea",{value:a,onChange:e=>n(e.target.value),placeholder:t.placeholder,className:"w-full h-24 p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500 resize-none","aria-label":"Create a new post"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,r.jsxs)("button",{type:"button",onClick:l,disabled:i,className:"flex items-center gap-2 px-4 py-2 text-green-700 font-semibold rounded-lg disabled:opacity-50 hover:bg-green-50 dark:text-green-400 dark:hover:bg-gray-700 transition",children:[i?r.jsx("div",{className:"w-4 h-4 border-2 border-dashed rounded-full animate-spin border-green-500"}):r.jsx(m,{size:16}),r.jsx("span",{children:i?t.generating:t.generateWithAI})]}),(0,r.jsxs)("button",{type:"submit",disabled:!a.trim(),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-green-700 transition",children:[r.jsx(g,{size:16}),r.jsx("span",{children:t.post})]})]})]})})}function w({lang:e,dictionary:t}){let a=(0,d.useRouter)(),[p,h]=(0,s.useState)(b),m=function(e){var t,a,r;let d;let{trackMouse:u}=e,p=s.useRef(Object.assign({},i)),h=s.useRef(Object.assign({},n)),m=s.useRef(Object.assign({},h.current));for(d in m.current=Object.assign({},h.current),h.current=Object.assign(Object.assign({},n),e),n)void 0===h.current[d]&&(h.current[d]=n[d]);let[g,x]=s.useMemo(()=>(function(e,t){let a=t=>{let a="touches"in t;a&&t.touches.length>1||e((e,s)=>{s.trackMouse&&!a&&(document.addEventListener(o,r),document.addEventListener(l,u));let{clientX:n,clientY:d}=a?t.touches[0]:t,p=c([n,d],s.rotationAngle);return s.onTouchStartOrOnMouseDown&&s.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),i),{initial:p.slice(),xy:p,start:t.timeStamp||0})})},r=t=>{e((e,a)=>{let r="touches"in t;if(r&&t.touches.length>1)return e;if(t.timeStamp-e.start>a.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:s,clientY:i}=r?t.touches[0]:t,[o,l]=c([s,i],a.rotationAngle),d=o-e.xy[0],u=l-e.xy[1],p=Math.abs(d),h=Math.abs(u),m=(t.timeStamp||0)-e.start,g=p>h?d>0?"Right":"Left":u>0?"Down":"Up",x="number"==typeof a.delta?a.delta:a.delta[g.toLowerCase()]||n.delta;if(p<x&&h<x&&!e.swiping)return e;let f={absX:p,absY:h,deltaX:d,deltaY:u,dir:g,event:t,first:e.first,initial:e.initial,velocity:Math.sqrt(p*p+h*h)/(m||1),vxvy:[d/(m||1),u/(m||1)]};f.first&&a.onSwipeStart&&a.onSwipeStart(f),a.onSwiping&&a.onSwiping(f);let y=!1;return(a.onSwiping||a.onSwiped||a[`onSwiped${g}`])&&(y=!0),y&&a.preventScrollOnSwipe&&a.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:f,swiping:!0})})},s=t=>{e((e,a)=>{let r;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<a.swipeDuration){r=Object.assign(Object.assign({},e.eventData),{event:t}),a.onSwiped&&a.onSwiped(r);let s=a[`onSwiped${r.dir}`];s&&s(r)}}else a.onTap&&a.onTap({event:t});return a.onTouchEndOrOnMouseUp&&a.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),i),{eventData:r})})},d=()=>{document.removeEventListener(o,r),document.removeEventListener(l,u)},u=e=>{d(),s(e)},p=(e,t)=>{let i=()=>{};if(e&&e.addEventListener){let o=Object.assign(Object.assign({},n.touchEventOptions),t.touchEventOptions),l=[["touchstart",a,o],["touchmove",r,Object.assign(Object.assign({},o),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",s,o]];l.forEach(([t,a,r])=>e.addEventListener(t,a,r)),i=()=>l.forEach(([t,a])=>e.removeEventListener(t,a))}return i},h={ref:t=>{null!==t&&e((e,a)=>{if(e.el===t)return e;let r={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),r.cleanUpTouch=void 0),a.trackTouch&&t&&(r.cleanUpTouch=p(t,a)),Object.assign(Object.assign(Object.assign({},e),{el:t}),r)})}};return t.trackMouse&&(h.onMouseDown=a),[h,p]})(e=>p.current=e(p.current,h.current),{trackMouse:u}),[u]);return p.current=(t=p.current,a=h.current,r=m.current,a.trackTouch&&t.el?t.cleanUpTouch?a.preventScrollOnSwipe!==r.preventScrollOnSwipe||a.touchEventOptions.passive!==r.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:x(t.el,a)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:x(t.el,a)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0}))),g}({onSwipedLeft:()=>a.push(`/${e}/discover`),onSwipedRight:()=>a.push(`/${e}/profile`),preventScrollOnSwipe:!0,trackMouse:!0});return r.jsx("div",{...m,className:"min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[r.jsx(j,{onCreatePost:e=>{let t={id:`post-${Date.now()}`,author:v,content:e,likes:0,comments:0,shares:0,timestamp:new Date};h(e=>[t,...e])},dictionary:t.compose}),r.jsx(u.default,{lang:e,posts:p})]})})}},3064:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(9510),s=a(8570);let n=(0,s.createProxy)(String.raw`E:\HamletUnified\Copy-of-Hamlet-social\components\views\HomeView.tsx`),{__esModule:i,$$typeof:o}=n;n.default;let l=(0,s.createProxy)(String.raw`E:\HamletUnified\Copy-of-Hamlet-social\components\views\HomeView.tsx#default`);var c=a(8483);async function d({params:{lang:e}}){let t=await (0,c.R)(e);return r.jsx(l,{lang:e,dictionary:t})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[740,517,344,656],()=>a(8021));module.exports=r})();